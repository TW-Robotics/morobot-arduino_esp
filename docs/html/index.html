<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>morobot-arduino_esp: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">morobot-arduino_esp
   </div>
   <div id="projectbrief">Library to control the UAS Technikum Wien morobots using an Arduino or ESP32 microcontroller</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">morobot-arduino_esp Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_C__Users_Johannes_Rauer_Documents_Arduino_libraries_morobot_README"></a><a href="https://www.gnu.org/licenses/gpl-3.0"><img src="https://img.shields.io/badge/License-GPLv3-blue.svg" alt="License: GPL v3" style="pointer-events: none;" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md0"></a>
morobot software library for microcontrollers Arduino and ESP</h1>
<p>This library can be used to control the UAS Technikum Wien morobots using an Arduino or ESP32 microcontroller.<br  />
 Visit <a href="https://tw-robotics.github.io/morobot-arduino_esp/">https://tw-robotics.github.io/morobot-arduino_esp/</a> to read the documentation.</p>
<p><img src="robot_info/morobot_types.png" alt="" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md1"></a>
Installation</h2>
<p>Download this library and install it in your Arduino IDE. See the <a href="https://www.arduino.cc/en/guide/libraries#toc4">Arduino Help Page</a> for more information.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Usage</h2>
<ol type="1">
<li><b>Connect your robot</b>: Connect your morobot to the microcontroller and the power supply as shown in the picture below. Note the order in which you have to connect the motors (see the <a href="robot_info/calibration-pose_coordinate-frames/">robot info</a>)! We recommend using an Arduino Mega (with HC-05 bluetooth module if you lilk) or an ESP32 development board. <img src="robot_info/morobot_connection.png" alt="" class="inline"/></li>
<li><b>Calibrate your robot</b>: Run the example <a href="examples/calibrate_robot/calibrate_robot.ino">calibrate_robot</a>. You have to change the 'MOROBOT_TYPE' to match your robot model. Move the joints of the robot into their calibration position, which is shown on the graphics in the see the <a href="robot_info/calibration-pose_coordinate-frames/">robot info folder</a>. This ensures that in the future the joints can only move within a permitted range, which prevents the robot from being damaged. In addition, the kinematics can only be calculated correctly for calibrated robots.</li>
<li><b>Have fun</b>: See the other <a href="examples/">examples</a> to learn how to move the robot around and teach positions. You can use the robots e.g. in combination with the Dabble-App and Bluetooth-Module to control them with your smartphone.</li>
<li><b>Using endeffectors</b>: To use a smartservo-gripper, just connect it to the last robot-servo. To use a normal servo just connect it to the microcontroller and see the <a href="examples/endeffector/endeffector.ino">endeffector-example</a> on using it. It is important to calibrate the parallel-gripper according to the example before using it. When using the angular-gripper with micro-servo make sure to call setParams() to set the limits correctly!</li>
</ol>
<h3><a class="anchor" id="autotoc_md3"></a>
Examples</h3>
<ul>
<li><b>base_importantFunctionCalls</b><br  />
 Bare minimum program and function calls for controlling a morobot-s rrp. Just put control commands into the loop and look what happens.</li>
<li><b>calibrate_robot</b><br  />
 Change the origin position of all motors of the robot. These values are stored in the motors so this program must only be called once to initially calibrate the robot. Check the robot-info for details on the zero-positions of the motors.</li>
<li><b>driveAround</b><br  />
 Control all morobots with the dabble app and drive around giving angular values or x-y-z-coordinates.</li>
<li><b>multiple_robots</b><br  />
 Control multiple robots (in this case 2x morobot-s) with the dabble app. Use the app to switch between the robots and drive the axes of the robots directly.</li>
<li><b>teach_robot</b><br  />
 Move the robot around and store positions using the Dabble-App. The robot can than drive to these positions autonomously. You can also export all positions as movement comments.</li>
<li><b>endeffector</b><br  />
 Use the different grippers in combination with the robots. </li>
</ul>
<h3><a class="anchor" id="autotoc_md4"></a>
Supported microcontrollers and ports</h3>
<ul>
<li>Arduino <b>Mega</b> - Control up to 4 morobots (Serial1, Serial2, Serial3, (Serial - prints bytestrings into serial monitor. Disconnect wires while uploading software!))</li>
<li>Arduino <b>Uno</b> - Control 1 morobot (Serial - prints bytestrings into serial monitor. Disconnect wires while uploading software!)</li>
<li><b>ESP32</b> - Control up to 3 morobots (Serial1, Serial2, (Serial - prints bytestrings into serial monitor. Disconnect wires while uploading software!))</li>
<li><b>ESP8266</b> - Control 1 morobot (Serial - prints bytestrings into serial monitor. Disconnect wires while uploading software!)</li>
<li>Not tested but supported:<ul>
<li>Arduino <b>Mini</b> (Serial - prints bytestrings into serial monitor. Disconnect wires while uploading software!)</li>
<li>Arduino <b>Nano</b> (Serial - prints bytestrings into serial monitor. Disconnect wires while uploading software!)</li>
<li>Arduino <b>Leonardo</b> (Serial1)</li>
<li>Arduino <b>Micro</b> (Serial1)</li>
<li>Arduino <b>Yun</b> (Serial1) See these links on <a href="https://randomnerdtutorials.com/installing-the-esp32-board-in-arduino-ide-windows-instructions/">how to install ESP32</a> and <a href="https://randomnerdtutorials.com/how-to-install-esp8266-board-arduino-ide/">ESP8266 boards</a> in your Arduino IDE.</li>
</ul>
</li>
</ul>
<p>Connect the robot's <b>yellow cable to TX</b>, the <b>white cable to RX</b>. </p><table class="doxtable">
<tr>
<th></th><th colspan="2">Serial*</th><th colspan="2">Serial1</th><th colspan="2">Serial2</th><th colspan="2">Serial3</th></tr>
<tr>
<td></td><td>RX</td><td>TX</td><td>RX</td><td>TX</td><td>RX</td><td>TX</td><td>RX</td><td>TX</td></tr>
<tr>
<td>Arduino UNO, Nano, Mini</td><td>0</td><td>1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr>
<td>Arduino Leonado, Micro, Yun</td><td></td><td></td><td>0</td><td>1</td><td></td><td></td><td></td><td></td></tr>
<tr>
<td>Arduino Mega</td><td>0</td><td>1</td><td>19</td><td>18</td><td>17</td><td>16</td><td>15</td><td>14</td></tr>
<tr>
<td>ESP32</td><td>3</td><td>1</td><td>22</td><td>23</td><td>16</td><td>17</td><td></td><td></td></tr>
<tr>
<td>ESP8266</td><td>3</td><td>1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
</table>
<p>*When using the Serial port, you HAVE TO DISCONNECT the cables while uploading code to the board. There will appear bytestrings in the serial monitor which are commands sent to the motors</p>
<h3><a class="anchor" id="autotoc_md5"></a>
Supported robot types</h3>
<ul>
<li>morobot-s (rrp)</li>
<li>morobot-s (rrr)</li>
<li>morobot-2d</li>
<li>morobot-3d</li>
<li>morobot-p </li>
</ul>
<h3><a class="anchor" id="autotoc_md6"></a>
Supported grippers</h3>
<ul>
<li>Smart-Servo Parallel-Gripper</li>
<li>Micro-Servo Angular-Gripper</li>
<li>Binary Endeffectors (Pumps, Electromagnets, Motors, ...) - Connected directly or via relais</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
How to add a new robot</h2>
<p>The class <a class="el" href="classmorobot_class.html" title="morobot base class for microcontrollers such as Arduino or ESP32">morobotClass</a> is an abstract base class implementing functions like moving the robot's joints. For each new robot type, a new child class with corresponding header- and cpp-file has to be implemented. Start with <a class="el" href="classnew_robot_class___template.html" title="morobot child class for newRobotClass_Template for microcontrollers such as Arduino or ESP32">newRobotClass_Template</a> and make the following changes:</p><ul>
<li>Copy the <a class="el" href="classnew_robot_class___template.html" title="morobot child class for newRobotClass_Template for microcontrollers such as Arduino or ESP32">newRobotClass_Template</a> files and rename them. Include type and kinematics into name</li>
<li>Make the following changes in the **.h-file** (See TODOs in file):<ul>
<li>Search for '<a class="el" href="classnew_robot_class___template.html" title="morobot child class for newRobotClass_Template for microcontrollers such as Arduino or ESP32">newRobotClass_Template</a>' and replace all instances with your class name (same name as .h and .cpp file)</li>
<li>Change the number of servos of the robot in the call of the <a class="el" href="classmorobot_class.html" title="morobot base class for microcontrollers such as Arduino or ESP32">morobotClass</a> constructor</li>
<li>Change the Number of servos and the joint limits in the variable '_jointLimits[][]'</li>
<li>Add variables necessary to solve the inverse kinematics (e.g. lengths of the axes)</li>
</ul>
</li>
<li>Make the following changes in the **.cpp-file** (See TODOs in file):<ul>
<li>Search for '<a class="el" href="classnew_robot_class___template.html" title="morobot child class for newRobotClass_Template for microcontrollers such as Arduino or ESP32">newRobotClass_Template</a>' and replace all instances with your class name (same name as .h and .cpp file)</li>
<li>In 'setTCPoffset()' add your code to calculate the new lengths of the last axis including the EEF-offsets</li>
<li>In 'calculateAngles()' implement the inverse kinematics of the robot</li>
<li>In 'updateCurrentXYZ' implement the forward kinematics of the robot</li>
</ul>
</li>
<li>To use your robot type, simple add an include with your header file name into your file and create an instance of the robot object (see examples for existing robots)</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Known issues</h2>
<ul>
<li>TCP-Offsets in y-directions not implemented for morobot-p and morobot-s (rrp and rrr)</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
License</h2>
<p>This software is licensed under the terms of the GNU General Public License v3.0. See the [LICENSE](LICENSE) for more information. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
